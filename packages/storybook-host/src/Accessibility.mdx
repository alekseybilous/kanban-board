import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Guidelines/Accessibility" />

# Accessibility Guidelines

Our design system is built with accessibility as a core principle, ensuring that all users can interact with your applications effectively.

## üéØ Accessibility Standards

We follow **WCAG 2.1 AA** guidelines to ensure:

- ‚úÖ **Perceivable** - Information is presentable in ways users can perceive
- ‚úÖ **Operable** - Interface components are operable by all users
- ‚úÖ **Understandable** - Information and UI operation are understandable
- ‚úÖ **Robust** - Content works with various assistive technologies

## üé® Color & Contrast

### Contrast Ratios

- **Normal text**: Minimum 4.5:1 contrast ratio
- **Large text (18px+)**: Minimum 3:1 contrast ratio
- **Interactive elements**: Clear visual distinction

### Color Usage

```css
/* ‚úÖ Good - Using semantic color tokens */
.error-message {
  color: var(--danger-text);
  background-color: var(--danger-surface);
}

/* ‚ùå Avoid - Color as only indicator */
.required-field {
  color: red; /* Also provide text or icon indicator */
}
```

### Testing Tools

- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)
- [Colour Contrast Analyser](https://www.tpgi.com/color-contrast-checker/)
- Browser DevTools Accessibility Panel

## ‚å®Ô∏è Keyboard Navigation

### Focus Management

```tsx
// ‚úÖ Proper focus management
function Modal({ isOpen, onClose }) {
  const firstFocusRef = useRef();

  useEffect(() => {
    if (isOpen) {
      firstFocusRef.current?.focus();
    }
  }, [isOpen]);

  return (
    <div role="dialog" aria-modal="true">
      <button ref={firstFocusRef} onClick={onClose}>
        Close
      </button>
    </div>
  );
}
```

### Focus Indicators

```css
/* ‚úÖ Clear focus indicators */
.btn:focus {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

/* ‚ùå Never remove focus indicators */
.btn:focus {
  outline: none; /* Don't do this */
}
```

### Tab Order

- Logical tab sequence through interactive elements
- Skip links for main content areas
- Proper heading hierarchy (h1 ‚Üí h2 ‚Üí h3)

## üîä Screen Reader Support

### Semantic HTML

```tsx
// ‚úÖ Use semantic elements
<nav>
  <ul>
    <li><a href="/home">Home</a></li>
    <li><a href="/about">About</a></li>
  </ul>
</nav>

// ‚úÖ Proper headings
<h1>Page Title</h1>
<h2>Section Title</h2>
<h3>Subsection</h3>
```

### ARIA Labels

```tsx
// ‚úÖ Descriptive labels
<button aria-label="Close dialog">√ó</button>

<input
  type="search"
  aria-label="Search products"
  placeholder="Enter search term"
/>

// ‚úÖ Form associations
<label htmlFor="email">Email Address</label>
<input id="email" type="email" required />
```

### Live Regions

```tsx
// ‚úÖ Announce dynamic content
<div aria-live="polite" aria-atomic="true">
  {statusMessage}
</div>

// ‚úÖ Error announcements
<div role="alert" aria-live="assertive">
  {errorMessage}
</div>
```

## üì± Responsive & Mobile

### Touch Targets

- Minimum 44px √ó 44px touch targets
- Adequate spacing between interactive elements
- Easy-to-reach primary actions

### Motion & Animation

```css
/* ‚úÖ Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .animated-element {
    animation: none;
    transition: none;
  }
}
```

## üß™ Testing Checklist

### Automated Testing

```bash
# Install accessibility testing tools
npm install --save-dev @axe-core/react jest-axe

# Run accessibility tests
npm run test:a11y
```

### Manual Testing

- [ ] Navigate entire interface using only keyboard
- [ ] Test with screen reader (NVDA, JAWS, VoiceOver)
- [ ] Verify color contrast ratios
- [ ] Check at 200% zoom level
- [ ] Test with various viewport sizes

### Component Testing

```tsx
import { render } from '@testing-library/react';
import { axe, toHaveNoViolations } from 'jest-axe';

expect.extend(toHaveNoViolations);

test('Button should be accessible', async () => {
  const { container } = render(<Button>Click me</Button>);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

## üõ†Ô∏è Implementation Examples

### Accessible Form

```tsx
function ContactForm() {
  const [errors, setErrors] = useState({});

  return (
    <form noValidate>
      <fieldset>
        <legend>Contact Information</legend>

        <div>
          <label htmlFor="name">Full Name *</label>
          <input
            id="name"
            type="text"
            required
            aria-describedby={errors.name ? 'name-error' : undefined}
            aria-invalid={!!errors.name}
          />
          {errors.name && (
            <div id="name-error" role="alert">
              {errors.name}
            </div>
          )}
        </div>
      </fieldset>
    </form>
  );
}
```

### Accessible Modal

```tsx
function Modal({ isOpen, title, children, onClose }) {
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') onClose();
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <h2 id="modal-title">{title}</h2>
      {children}
      <button onClick={onClose} aria-label="Close dialog">
        √ó
      </button>
    </div>
  );
}
```

## üìö Resources

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [MDN Accessibility Guide](https://developer.mozilla.org/en-US/docs/Web/Accessibility)
- [WebAIM Screen Reader Testing](https://webaim.org/articles/screenreader_testing/)
- [Inclusive Design Principles](https://inclusivedesignprinciples.org/)

---

_Accessibility is not optional‚Äîit's essential for creating inclusive experiences that work for everyone._
